<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdÄ±m AdÄ±m Problem Ã‡Ã¶zme</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #1e40af; /* Modern mavi */
            --secondary-color: #f59e0b; /* CanlÄ± sarÄ±-turuncu */
            --background-color: #f8fafc; /* AÃ§Ä±k gri-mavi arka plan */
            --card-bg: #ffffff; /* Kartlar iÃ§in beyaz */
            --text-color: #1f2937; /* Koyu gri metin */
            --correct-color: #10b981; /* Modern yeÅŸil */
            --incorrect-color: #ef4444; /* Modern kÄ±rmÄ±zÄ± */
            --disabled-color: #e5e7eb; /* Hafif gri */
            --shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            --accent-color: #7c3aed; /* Mor vurgu rengi */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--background-color) 0%, #e0e7ff 100%);
        }

        main {
            width: 100%;
            max-width: 800px;
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: var(--shadow);
            border-left: 6px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        main::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        #problem-viewport {
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .problem-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            position: relative;
        }

        .problem-icon {
            font-size: 3rem;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: iconPulse 2s ease-in-out infinite;
        }

        .problem-title {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: -0.025em;
        }

        .problem-text {
            background-color: #f1f5f9;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: left;
            font-size: 1.1rem;
            line-height: 1.8;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        #solution-steps-container {
            text-align: left;
            margin-top: 2rem;
        }

        .step-wrapper {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border: 2px solid var(--disabled-color);
            border-radius: 12px;
            opacity: 0.7;
            transition: all 0.3s ease;
        }

        .step-wrapper.active {
            opacity: 1;
            border-color: var(--secondary-color);
            background-color: #fff7ed;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .step-question {
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        .option-btn {
            width: 100%;
            padding: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            border: 2px solid var(--disabled-color);
            border-radius: 10px;
            background-color: var(--card-bg);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option-btn:not(:disabled):hover {
            border-color: var(--secondary-color);
            background-color: #fef3c7;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .option-btn.correct {
            background-color: #d1fae5;
            border-color: var(--correct-color);
            color: var(--text-color);
            font-weight: 600;
        }

        .option-btn.incorrect {
            background-color: #fee2e2;
            border-color: var(--incorrect-color);
            color: var(--text-color);
            animation: shake 0.4s ease;
        }

        .step-explanation {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #f0fdf4;
            border-radius: 10px;
            font-weight: 500;
            color: var(--text-color);
            border-left: 4px solid var(--correct-color);
        }

        #final-feedback {
            text-align: center;
            padding: 1.5rem;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-color);
            background-color: #dbeafe;
            border-radius: 12px;
            margin-top: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        #navigation-controls {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 2px solid var(--disabled-color);
        }

        .nav-btn {
            padding: 14px 40px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #new-problem-btn {
            background-color: var(--secondary-color);
            color: white;
        }

        #new-problem-btn:hover {
            background-color: #d97706;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        #finish-btn {
            background-color: var(--accent-color);
            color: white;
        }

        #finish-btn:hover {
            background-color: #6d28d9;
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .footer-credits {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-color);
            opacity: 0.7;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--disabled-color);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-6px); }
            75% { transform: translateX(6px); }
        }

        @keyframes iconPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @media (min-width: 600px) {
            .options-grid {
                grid-template-columns: 1fr 1fr;
            }
            main {
                padding: 3rem;
            }
            .problem-title {
                font-size: 2rem;
            }
            .problem-icon {
                font-size: 3.5rem;
            }
        }

        @media (min-width: 1024px) {
            main {
                max-width: 900px;
            }
        }
    </style>
    <script src="scorm_api.js"></script>
</head>
<body>
    <main>
        <div id="problem-viewport">
            <div class="problem-header">
                <span class="problem-icon">â™»ï¸</span>
                <h2 class="problem-title">Geri DÃ¶nÃ¼ÅŸÃ¼m KampanyasÄ±</h2>
            </div>
            <p class="problem-text">Bir belediye geri dÃ¶nÃ¼ÅŸÃ¼m kampanyasÄ±nda: Okullar <strong>1650</strong> plastik ÅŸiÅŸe, evler ise <strong>2780</strong> plastik ÅŸiÅŸe topladÄ±. Ancak bu ÅŸiÅŸelerden <strong>430</strong> tanesi geri dÃ¶nÃ¼ÅŸÃ¼me uygun olmadÄ±ÄŸÄ± iÃ§in ayrÄ±ldÄ±. <br><strong>Hedef 5000 ÅŸiÅŸe ise, kampanyada kaÃ§ ÅŸiÅŸeye daha ihtiyaÃ§ vardÄ±r?</strong></p>
            <div id="solution-steps-container">
                <div class="step-wrapper active">
                    <p class="step-question">1. AdÄ±m: Ä°lk olarak ne yapmalÄ±yÄ±z?</p>
                    <div class="options-grid">
                        <button class="option-btn" data-index="0">Evlerden toplanan ÅŸiÅŸelerden uygun olmayanlarÄ± Ã§Ä±karmalÄ±yÄ±z.</button>
                        <button class="option-btn" data-index="1">Okul ve evlerden toplanan toplam ÅŸiÅŸe sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.</button>
                        <button class="option-btn" data-index="2">Hedef sayÄ±dan okulun topladÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.</button>
                    </div>
                    <div class="step-explanation" style="display: none;"></div>
                </div>
            </div>
            <div id="final-feedback" style="display: none;"></div>
        </div>

        <div id="navigation-controls">
            <button id="finish-btn" class="nav-btn">EtkinliÄŸi Bitir</button>
            <button id="new-problem-btn" class="nav-btn">Yeni Problem</button>
        </div>

        <div class="footer-credits">HazÄ±rlayan: Osman AYDOÄDU</div>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const problems = [
            {
                icon: 'â™»ï¸', title: 'Geri DÃ¶nÃ¼ÅŸÃ¼m KampanyasÄ±',
                text: 'Bir belediye geri dÃ¶nÃ¼ÅŸÃ¼m kampanyasÄ±nda: Okullar <strong>1650</strong> plastik ÅŸiÅŸe, evler ise <strong>2780</strong> plastik ÅŸiÅŸe topladÄ±. Ancak bu ÅŸiÅŸelerden <strong>430</strong> tanesi geri dÃ¶nÃ¼ÅŸÃ¼me uygun olmadÄ±ÄŸÄ± iÃ§in ayrÄ±ldÄ±. <br><strong>Hedef 5000 ÅŸiÅŸe ise, kampanyada kaÃ§ ÅŸiÅŸeye daha ihtiyaÃ§ vardÄ±r?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak ne yapmalÄ±yÄ±z?',
                        options: ['Evlerden toplanan ÅŸiÅŸelerden uygun olmayanlarÄ± Ã§Ä±karmalÄ±yÄ±z.', 'Okul ve evlerden toplanan toplam ÅŸiÅŸe sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan okulun topladÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'Harika! Toplam ÅŸiÅŸeyi bulalÄ±m: 1650 + 2780 = <strong>4430 ÅŸiÅŸe</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi geri dÃ¶nÃ¼ÅŸÃ¼me uygun ÅŸiÅŸe sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam ÅŸiÅŸe sayÄ±sÄ±na uygun olmayanlarÄ± eklemeliyiz.', 'Hedef sayÄ±dan toplam ÅŸiÅŸe sayÄ±sÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.', 'Toplam ÅŸiÅŸe sayÄ±sÄ±ndan uygun olmayan 430 ÅŸiÅŸeyi Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 2,
                        explanation: 'Kesinlikle! Uygun ÅŸiÅŸe sayÄ±sÄ±: 4430 - 430 = <strong>4000 ÅŸiÅŸe</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Son olarak hedefe ulaÅŸmak iÃ§in kaÃ§ ÅŸiÅŸe gerektiÄŸini nasÄ±l hesaplarÄ±z?',
                        options: ['Hedef olan 5000\'den, elimizdeki uygun 4000 ÅŸiÅŸeyi Ã§Ä±kararak.', 'Hedefe, elimizdeki ÅŸiÅŸe sayÄ±sÄ±nÄ± ekleyerek.', 'Toplam ÅŸiÅŸe sayÄ±sÄ±ndan hedefi Ã§Ä±kararak.'],
                        correctAnswerIndex: 0,
                        explanation: 'DoÄŸru! Eksik ÅŸiÅŸe sayÄ±sÄ±: 5000 - 4000 = <strong>1000 ÅŸiÅŸe</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸ“š', title: 'Kitap BaÄŸÄ±ÅŸÄ±',
                text: 'Bir dernek, kÃ¶y okuluna kitap baÄŸÄ±ÅŸÄ± yapÄ±yor. Åu ana kadar <strong>2350</strong> hikaye kitabÄ±, <strong>1820</strong> masal kitabÄ± ve <strong>900</strong> ders kitabÄ± gÃ¶nderildi. Ancak taÅŸÄ±ma sÄ±rasÄ±nda <strong>130</strong> kitap zarar gÃ¶rdÃ¼. <br><strong>Hedef 5500 kitap olduÄŸuna gÃ¶re, kaÃ§ kitap daha gereklidir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: BaÅŸlangÄ±Ã§ta ne yapmalÄ±yÄ±z?',
                        options: ['TÃ¼m tÃ¼rlerdeki kitaplarÄ± toplayarak toplam baÄŸÄ±ÅŸ sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hikaye kitaplarÄ±ndan zarar gÃ¶renleri Ã§Ä±karmalÄ±yÄ±z.', 'Hedef sayÄ±dan ders kitabÄ± sayÄ±sÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 0,
                        explanation: 'SÃ¼per! Toplam kitap sayÄ±sÄ±: 2350 + 1820 + 900 = <strong>5070 kitap</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi okula ulaÅŸan saÄŸlam kitap sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam kitap sayÄ±sÄ±ndan zarar gÃ¶ren 130 kitabÄ± Ã§Ä±kararak.', 'Toplam kitap sayÄ±sÄ±na zarar gÃ¶renleri ekleyerek.', 'Sadece hikaye ve masal kitaplarÄ±nÄ± toplayarak.'],
                        correctAnswerIndex: 0,
                        explanation: 'Ã‡ok doÄŸru! SaÄŸlam kitaplar: 5070 - 130 = <strong>4940 kitap</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in gereken kitap sayÄ±sÄ±nÄ± nasÄ±l hesaplarÄ±z?',
                        options: ['SaÄŸlam kitap sayÄ±sÄ±ndan hedefi Ã§Ä±kararak.', 'Hedef olan 5500\'den saÄŸlam kitap sayÄ±sÄ± olan 4940\'Ä± Ã§Ä±kararak.', 'Zarar gÃ¶ren kitap sayÄ±sÄ±nÄ± hedefle toplayarak.'],
                        correctAnswerIndex: 1,
                        explanation: 'HarikasÄ±n! Eksik kitap sayÄ±sÄ±: 5500 - 4940 = <strong>560 kitap</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸŒ³', title: 'Fidan Dikme ÅenliÄŸi',
                text: 'Orman HaftasÄ±\'nda bir okul fidan dikme ÅŸenliÄŸi dÃ¼zenledi. 5.&nbsp;sÄ±nÄ±flar <strong>875</strong> fidan, 6.&nbsp;sÄ±nÄ±flar ise <strong>950</strong> fidan dikti. Ancak dikilen fidanlardan <strong>70</strong> tanesi kuruduÄŸu iÃ§in tutmadÄ±.<br><strong>Okulun hedefi 2000 saÄŸlÄ±klÄ± fidan ise, hedefe kaÃ§ fidan kalmÄ±ÅŸtÄ±r?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak hangi iÅŸlemi yapmalÄ±yÄ±z?',
                        options: ['Toplam dikilen fidan sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Kuruyan fidanlarÄ± 5. sÄ±nÄ±flarÄ±n diktiÄŸinden Ã§Ä±karmalÄ±yÄ±z.', 'Hedef sayÄ±dan kuruyanlarÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 0,
                        explanation: 'DoÄŸru! Toplam dikilen fidan: 875 + 950 = <strong>1825 fidan</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi saÄŸlÄ±klÄ±, yani tutan fidan sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam dikilen fidandan kuruyan 70 fidanÄ± Ã§Ä±kararak.', 'Toplam dikilen fidana kuruyanlarÄ± ekleyerek.', 'Hedef sayÄ±ya toplam dikilen fidanÄ± ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'MÃ¼kemmel! SaÄŸlÄ±klÄ± fidan sayÄ±sÄ±: 1825 - 70 = <strong>1755 fidan</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in kaÃ§ fidan gerektiÄŸini nasÄ±l buluruz?',
                        options: ['SaÄŸlÄ±klÄ± fidanlarÄ± hedefle toplayarak.', 'Hedef olan 2000\'den saÄŸlÄ±klÄ± fidan sayÄ±sÄ± olan 1755\'i Ã§Ä±kararak.', 'Toplam dikilen fidandan saÄŸlÄ±klÄ± fidanlarÄ± Ã§Ä±kararak.'],
                        correctAnswerIndex: 1,
                        explanation: 'Ä°ÅŸte bu! Hedefe ulaÅŸmak iÃ§in: 2000 - 1755 = <strong>245 fidan</strong> daha gerekir.'
                    }
                ]
            },
            {
                icon: 'ğŸ’§', title: 'Su Tasarrufu KampanyasÄ±',
                text: 'Bir ÅŸehir su tasarrufu kampanyasÄ±nda: Okullar <strong>1200</strong> litre, evler <strong>2500</strong> litre tasarruf etti. Ancak bu miktardan <strong>300</strong> litre boÅŸa gitti. <br><strong>Hedef 4000 litre ise, kaÃ§ litre daha tasarruf etmek gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak ne yapmalÄ±yÄ±z?',
                        options: ['Evlerden tasarruf edilen litreden boÅŸa gidenleri Ã§Ä±karmalÄ±yÄ±z.', 'Okul ve evlerden tasarruf edilen toplam litre sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan okulun tasarrufunu Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'Harika! Toplam tasarruf: 1200 + 2500 = <strong>3700 litre</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi etkili tasarruf miktarÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam tasarrufa boÅŸa gidenleri eklemeliyiz.', 'Hedef sayÄ±dan toplam tasarrufu Ã§Ä±karmalÄ±yÄ±z.', 'Toplam tasarruftan boÅŸa giden 300 litreyi Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 2,
                        explanation: 'Kesinlikle! Etkili tasarruf: 3700 - 300 = <strong>3400 litre</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Son olarak hedefe ulaÅŸmak iÃ§in kaÃ§ litre gerektiÄŸini nasÄ±l hesaplarÄ±z?',
                        options: ['Hedef olan 4000\'den, etkili 3400 litreyi Ã§Ä±kararak.', 'Hedefe, etkili tasarruf miktarÄ±nÄ± ekleyerek.', 'Toplam tasarruftan hedefi Ã§Ä±kararak.'],
                        correctAnswerIndex: 0,
                        explanation: 'DoÄŸru! Eksik miktar: 4000 - 3400 = <strong>600 litre</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸŒ¿', title: 'AÄŸaÃ§landÄ±rma Projesi',
                text: 'Bir kÃ¶y aÄŸaÃ§landÄ±rma projesinde: KÃ¶ylÃ¼ler <strong>500</strong> fidan, gÃ¶nÃ¼llÃ¼ler <strong>800</strong> fidan dikti. Ancak dikilenlerden <strong>100</strong> tanesi tutmadÄ±. <br><strong>Hedef 1500 fidan ise, kaÃ§ fidan daha dikmek gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak ne yapmalÄ±yÄ±z?',
                        options: ['GÃ¶nÃ¼llÃ¼lerin diktiÄŸinden tutmayanlarÄ± Ã§Ä±karmalÄ±yÄ±z.', 'KÃ¶ylÃ¼ ve gÃ¶nÃ¼llÃ¼lerin diktiÄŸi toplam fidan sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan kÃ¶ylÃ¼lerin diktiÄŸini Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'SÃ¼per! Toplam fidan: 500 + 800 = <strong>1300 fidan</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi tutan fidan sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam fidandan tutmayan 100 fidanÄ± Ã§Ä±kararak.', 'Toplam fidana tutmayanlarÄ± ekleyerek.', 'Hedef sayÄ±ya toplam fidanÄ± ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'Ã‡ok doÄŸru! Tutan fidanlar: 1300 - 100 = <strong>1200 fidan</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in gereken fidan sayÄ±sÄ±nÄ± nasÄ±l hesaplarÄ±z?',
                        options: ['Tutan fidan sayÄ±sÄ±ndan hedefi Ã§Ä±kararak.', 'Hedef olan 1500\'den tutan fidan sayÄ±sÄ± olan 1200\'Ã¼ Ã§Ä±kararak.', 'Tutmayan fidan sayÄ±sÄ±nÄ± hedefle toplayarak.'],
                        correctAnswerIndex: 1,
                        explanation: 'HarikasÄ±n! Eksik fidan: 1500 - 1200 = <strong>300 fidan</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸ²', title: 'Yemek BaÄŸÄ±ÅŸÄ±',
                text: 'Bir yardÄ±m derneÄŸi yemek baÄŸÄ±ÅŸÄ±nda: Åirketler <strong>3000</strong> porsiyon, bireyler <strong>1500</strong> porsiyon baÄŸÄ±ÅŸladÄ±. Ancak bunlardan <strong>200</strong> tanesi bozuldu. <br><strong>Hedef 5000 porsiyon ise, kaÃ§ porsiyon daha gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak hangi iÅŸlemi yapmalÄ±yÄ±z?',
                        options: ['Bireylerin baÄŸÄ±ÅŸÄ±ndan bozulanlarÄ± Ã§Ä±karmalÄ±yÄ±z.', 'Åirket ve bireylerin toplam baÄŸÄ±ÅŸ sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan ÅŸirketlerin baÄŸÄ±ÅŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'DoÄŸru! Toplam porsiyon: 3000 + 1500 = <strong>4500 porsiyon</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi kullanÄ±labilir porsiyon sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam porsiyondan bozulan 200 porsiyonu Ã§Ä±kararak.', 'Toplam porsiyona bozulanlarÄ± ekleyerek.', 'Hedef sayÄ±ya toplam porsiyonu ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'MÃ¼kemmel! KullanÄ±labilir porsiyon: 4500 - 200 = <strong>4300 porsiyon</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in kaÃ§ porsiyon gerektiÄŸini nasÄ±l buluruz?',
                        options: ['KullanÄ±labilir porsiyonlarÄ± hedefle toplayarak.', 'Hedef olan 5000\'den kullanÄ±labilir 4300 porsiyonu Ã§Ä±kararak.', 'Toplam porsiyondan kullanÄ±labilir porsiyonlarÄ± Ã§Ä±kararak.'],
                        correctAnswerIndex: 1,
                        explanation: 'Ä°ÅŸte bu! Eksik porsiyon: 5000 - 4300 = <strong>700 porsiyon</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸ©¸', title: 'Kan BaÄŸÄ±ÅŸÄ± KampanyasÄ±',
                text: 'Bir hastane kan baÄŸÄ±ÅŸÄ± kampanyasÄ±nda: Ã‡alÄ±ÅŸanlar <strong>400</strong> Ã¼nite, Ã¶ÄŸrenciler <strong>600</strong> Ã¼nite baÄŸÄ±ÅŸladÄ±. Ancak bunlardan <strong>50</strong> tanesi uygun deÄŸildi. <br><strong>Hedef 1000 Ã¼nite ise, kaÃ§ Ã¼nite daha gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak ne yapmalÄ±yÄ±z?',
                        options: ['Ã–ÄŸrencilerin baÄŸÄ±ÅŸÄ±ndan uygun olmayanlarÄ± Ã§Ä±karmalÄ±yÄ±z.', 'Ã‡alÄ±ÅŸan ve Ã¶ÄŸrencilerin toplam Ã¼nite sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan Ã§alÄ±ÅŸanlarÄ±n baÄŸÄ±ÅŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'Harika! Toplam Ã¼nite: 400 + 600 = <strong>1000 Ã¼nite</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi uygun Ã¼nite sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam Ã¼niteden uygun olmayan 50 Ã¼niteyi Ã§Ä±kararak.', 'Toplam Ã¼niteye uygun olmayanlarÄ± ekleyerek.', 'Hedef sayÄ±ya toplam Ã¼niteyi ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'Kesinlikle! Uygun Ã¼nite: 1000 - 50 = <strong>950 Ã¼nite</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Son olarak hedefe ulaÅŸmak iÃ§in kaÃ§ Ã¼nite gerektiÄŸini nasÄ±l hesaplarÄ±z?',
                        options: ['Hedef olan 1000\'den, uygun 950 Ã¼niteyi Ã§Ä±kararak.', 'Hedefe, uygun Ã¼nite sayÄ±sÄ±nÄ± ekleyerek.', 'Toplam Ã¼niteden hedefi Ã§Ä±kararak.'],
                        correctAnswerIndex: 0,
                        explanation: 'DoÄŸru! Eksik Ã¼nite: 1000 - 950 = <strong>50 Ã¼nite</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸ‘•', title: 'Giysi Toplama KampanyasÄ±',
                text: 'Bir yardÄ±m Ã¶rgÃ¼tÃ¼ giysi toplamada: Mahalleler <strong>2000</strong> parÃ§a, dernekler <strong>3000</strong> parÃ§a topladÄ±. Ancak bunlardan <strong>400</strong> tanesi eskiydi. <br><strong>Hedef 6000 parÃ§a ise, kaÃ§ parÃ§a daha gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: BaÅŸlangÄ±Ã§ta ne yapmalÄ±yÄ±z?',
                        options: ['Derneklerin topladÄ±ÄŸÄ±ndan eskileri Ã§Ä±karmalÄ±yÄ±z.', 'Mahalle ve derneklerin toplam parÃ§a sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan mahallelerin topladÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'SÃ¼per! Toplam parÃ§a: 2000 + 3000 = <strong>5000 parÃ§a</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi kullanÄ±labilir parÃ§a sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam parÃ§adan eski 400 parÃ§ayÄ± Ã§Ä±kararak.', 'Toplam parÃ§aya eskileri ekleyerek.', 'Sadece mahalle ve dernek parÃ§alarÄ±nÄ± toplayarak.'],
                        correctAnswerIndex: 0,
                        explanation: 'Ã‡ok doÄŸru! KullanÄ±labilir parÃ§a: 5000 - 400 = <strong>4600 parÃ§a</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in gereken parÃ§a sayÄ±sÄ±nÄ± nasÄ±l hesaplarÄ±z?',
                        options: ['KullanÄ±labilir parÃ§a sayÄ±sÄ±ndan hedefi Ã§Ä±kararak.', 'Hedef olan 6000\'den kullanÄ±labilir 4600 parÃ§ayÄ± Ã§Ä±kararak.', 'Eski parÃ§a sayÄ±sÄ±nÄ± hedefle toplayarak.'],
                        correctAnswerIndex: 1,
                        explanation: 'HarikasÄ±n! Eksik parÃ§a: 6000 - 4600 = <strong>1400 parÃ§a</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸ—‘ï¸', title: 'AtÄ±k Toplama EtkinliÄŸi',
                text: 'Bir fabrika atÄ±k toplama etkinliÄŸinde: Fabrikalar <strong>5000</strong> kg, evler <strong>3000</strong> kg atÄ±k topladÄ±. Ancak bunlardan <strong>800</strong> kg kirliydi. <br><strong>Hedef 10000 kg ise, kaÃ§ kg daha gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak hangi iÅŸlemi yapmalÄ±yÄ±z?',
                        options: ['Evlerin topladÄ±ÄŸÄ±ndan kirlileri Ã§Ä±karmalÄ±yÄ±z.', 'Fabrika ve evlerin toplam kg sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan fabrikalarÄ±n topladÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'DoÄŸru! Toplam kg: 5000 + 3000 = <strong>8000 kg</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi temiz kg sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam kg\'dan kirli 800 kg\'yi Ã§Ä±kararak.', 'Toplam kg\'ya kirlileri ekleyerek.', 'Hedef sayÄ±ya toplam kg\'yi ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'MÃ¼kemmel! Temiz kg: 8000 - 800 = <strong>7200 kg</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in kaÃ§ kg gerektiÄŸini nasÄ±l buluruz?',
                        options: ['Temiz kg\'leri hedefle toplayarak.', 'Hedef olan 10000\'den temiz 7200 kg\'yi Ã§Ä±kararak.', 'Toplam kg\'dan temiz kg\'leri Ã§Ä±kararak.'],
                        correctAnswerIndex: 1,
                        explanation: 'Ä°ÅŸte bu! Eksik kg: 10000 - 7200 = <strong>2800 kg</strong>'
                    }
                ]
            },
            {
                icon: 'âœï¸', title: 'EÄŸitim Malzemesi Toplama',
                text: 'Bir okul eÄŸitim malzemesi toplamada: Ã–ÄŸretmenler <strong>1000</strong> kalem, Ã¶ÄŸrenciler <strong>2000</strong> kalem topladÄ±. Ancak bunlardan <strong>150</strong> tanesi kÄ±rÄ±k. <br><strong>Hedef 3000 kalem ise, kaÃ§ kalem daha gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak ne yapmalÄ±yÄ±z?',
                        options: ['Ã–ÄŸrencilerin topladÄ±ÄŸÄ±ndan kÄ±rÄ±klarÄ± Ã§Ä±karmalÄ±yÄ±z.', 'Ã–ÄŸretmen ve Ã¶ÄŸrencilerin toplam kalem sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan Ã¶ÄŸretmenlerin topladÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'Harika! Toplam kalem: 1000 + 2000 = <strong>3000 kalem</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi saÄŸlam kalem sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam kalemden kÄ±rÄ±k 150 kalemi Ã§Ä±kararak.', 'Toplam kaleme kÄ±rÄ±klarÄ± ekleyerek.', 'Hedef sayÄ±ya toplam kalemi ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'Kesinlikle! SaÄŸlam kalem: 3000 - 150 = <strong>2850 kalem</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Son olarak hedefe ulaÅŸmak iÃ§in kaÃ§ kalem gerektiÄŸini nasÄ±l hesaplarÄ±z?',
                        options: ['Hedef olan 3000\'den, saÄŸlam 2850 kalemi Ã§Ä±kararak.', 'Hedefe, saÄŸlam kalem sayÄ±sÄ±nÄ± ekleyerek.', 'Toplam kalemden hedefi Ã§Ä±kararak.'],
                        correctAnswerIndex: 0,
                        explanation: 'DoÄŸru! Eksik kalem: 3000 - 2850 = <strong>150 kalem</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸŸï¸', title: 'Spor EtkinliÄŸi Bilet SatÄ±ÅŸÄ±',
                text: 'Bir spor kulÃ¼bÃ¼ bilet satÄ±ÅŸÄ±nda: TakÄ±mlar <strong>1500</strong> bilet, bireyler <strong>2500</strong> bilet aldÄ±. Ancak bunlardan <strong>300</strong> tanesi iade edildi. <br><strong>Hedef 4000 bilet ise, kaÃ§ bilet daha satmak gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: BaÅŸlangÄ±Ã§ta ne yapmalÄ±yÄ±z?',
                        options: ['Bireylerin aldÄ±ÄŸÄ±ndan iadeleri Ã§Ä±karmalÄ±yÄ±z.', 'TakÄ±m ve bireylerin toplam bilet sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan takÄ±mlarÄ±n aldÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'SÃ¼per! Toplam bilet: 1500 + 2500 = <strong>4000 bilet</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi net bilet sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam biletten iade 300 bileti Ã§Ä±kararak.', 'Toplam bilete iadeleri ekleyerek.', 'Sadece takÄ±m ve birey biletlerini toplayarak.'],
                        correctAnswerIndex: 0,
                        explanation: 'Ã‡ok doÄŸru! Net bilet: 4000 - 300 = <strong>3700 bilet</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in gereken bilet sayÄ±sÄ±nÄ± nasÄ±l hesaplarÄ±z?',
                        options: ['Net bilet sayÄ±sÄ±ndan hedefi Ã§Ä±kararak.', 'Hedef olan 4000\'den net 3700 bileti Ã§Ä±kararak.', 'Ä°ade bilet sayÄ±sÄ±nÄ± hedefle toplayarak.'],
                        correctAnswerIndex: 1,
                        explanation: 'HarikasÄ±n! Eksik bilet: 4000 - 3700 = <strong>300 bilet</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸ’‰', title: 'SaÄŸlÄ±k KampanyasÄ± AÅŸÄ± Toplama',
                text: 'Bir saÄŸlÄ±k Ã¶rgÃ¼tÃ¼ aÅŸÄ± toplamada: Klinikler <strong>2000</strong> aÅŸÄ±, eczaneler <strong>1500</strong> aÅŸÄ± saÄŸladÄ±. Ancak bunlardan <strong>100</strong> tanesinin son kullanma tarihi geÃ§miÅŸ. <br><strong>Hedef 4000 aÅŸÄ± ise, kaÃ§ aÅŸÄ± daha gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak hangi iÅŸlemi yapmalÄ±yÄ±z?',
                        options: ['Eczanelerin saÄŸladÄ±ÄŸÄ±ndan geÃ§miÅŸleri Ã§Ä±karmalÄ±yÄ±z.', 'Klinik ve eczanelerin toplam aÅŸÄ± sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan kliniklerin saÄŸladÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'DoÄŸru! Toplam aÅŸÄ±: 2000 + 1500 = <strong>3500 aÅŸÄ±</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi geÃ§erli aÅŸÄ± sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam aÅŸÄ±dan geÃ§miÅŸ 100 aÅŸÄ±yÄ± Ã§Ä±kararak.', 'Toplam aÅŸÄ±ya geÃ§miÅŸleri ekleyerek.', 'Hedef sayÄ±ya toplam aÅŸÄ±yÄ± ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'MÃ¼kemmel! GeÃ§erli aÅŸÄ±: 3500 - 100 = <strong>3400 aÅŸÄ±</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Hedefe ulaÅŸmak iÃ§in kaÃ§ aÅŸÄ± gerektiÄŸini nasÄ±l buluruz?',
                        options: ['GeÃ§erli aÅŸÄ±larÄ± hedefle toplayarak.', 'Hedef olan 4000\'den geÃ§erli 3400 aÅŸÄ±yÄ± Ã§Ä±kararak.', 'Toplam aÅŸÄ±dan geÃ§erli aÅŸÄ±larÄ± Ã§Ä±kararak.'],
                        correctAnswerIndex: 1,
                        explanation: 'Ä°ÅŸte bu! Eksik aÅŸÄ±: 4000 - 3400 = <strong>600 aÅŸÄ±</strong>'
                    }
                ]
            },
            {
                icon: 'ğŸ§¹', title: 'Ã‡evre TemizliÄŸi EtkinliÄŸi',
                text: 'Bir belediye Ã§evre temizliÄŸinde: GÃ¶nÃ¼llÃ¼ler <strong>500</strong> torba Ã§Ã¶p, belediye ekipleri <strong>800</strong> torba Ã§Ã¶p topladÄ±. Ancak bunlardan <strong>100</strong> torba geri bÄ±rakÄ±ldÄ±. <br><strong>Hedef 1500 torba ise, kaÃ§ torba daha toplamak gerekir?</strong>',
                steps: [
                    {
                        question: '1. AdÄ±m: Ä°lk olarak ne yapmalÄ±yÄ±z?',
                        options: ['Belediye ekiplerinin topladÄ±ÄŸÄ±ndan geri bÄ±rakÄ±lanlarÄ± Ã§Ä±karmalÄ±yÄ±z.', 'GÃ¶nÃ¼llÃ¼ ve belediye ekiplerinin toplam torba sayÄ±sÄ±nÄ± bulmalÄ±yÄ±z.', 'Hedef sayÄ±dan gÃ¶nÃ¼llÃ¼lerin topladÄ±ÄŸÄ±nÄ± Ã§Ä±karmalÄ±yÄ±z.'],
                        correctAnswerIndex: 1,
                        explanation: 'Harika! Toplam torba: 500 + 800 = <strong>1300 torba</strong>'
                    },
                    {
                        question: '2. AdÄ±m: Åimdi net torba sayÄ±sÄ±nÄ± nasÄ±l buluruz?',
                        options: ['Toplam torbadan geri bÄ±rakÄ±lan 100 torbayÄ± Ã§Ä±kararak.', 'Toplam torbaya geri bÄ±rakÄ±lanlarÄ± ekleyerek.', 'Hedef sayÄ±ya toplam torbayÄ± ekleyerek.'],
                        correctAnswerIndex: 0,
                        explanation: 'Kesinlikle! Net torba: 1300 - 100 = <strong>1200 torba</strong>'
                    },
                    {
                        question: '3. AdÄ±m: Son olarak hedefe ulaÅŸmak iÃ§in kaÃ§ torba gerektiÄŸini nasÄ±l hesaplarÄ±z?',
                        options: ['Hedef olan 1500\'den, net 1200 torbayÄ± Ã§Ä±kararak.', 'Hedefe, net torba sayÄ±sÄ±nÄ± ekleyerek.', 'Toplam torbadan hedefi Ã§Ä±kararak.'],
                        correctAnswerIndex: 0,
                        explanation: 'DoÄŸru! Eksik torba: 1500 - 1200 = <strong>300 torba</strong>'
                    }
                ]
            }
        ];

        const mainContainer = document.querySelector('main');
        let problemViewport = document.getElementById('problem-viewport');
        let newProblemBtn = document.getElementById('new-problem-btn');
        let finishBtn = document.getElementById('finish-btn');
        let currentProblemIndex = 0;
        let currentStepIndex = 0;

        function loadProblem(index) {
            currentStepIndex = 0;
            const problem = problems[index];
            
            problemViewport.innerHTML = `
                <div class="problem-header">
                    <span class="problem-icon">${problem.icon}</span>
                    <h2 class="problem-title">${problem.title}</h2>
                </div>
                <p class="problem-text">${problem.text}</p>
                <div id="solution-steps-container"></div>
                <div id="final-feedback" style="display: none;"></div>
            `;

            renderStep(problem, currentStepIndex);
        }

        function renderStep(problem, stepIndex) {
            const stepsContainer = document.getElementById('solution-steps-container');
            if (!stepsContainer) return; 
            const step = problem.steps[stepIndex];

            const stepWrapper = document.createElement('div');
            stepWrapper.className = 'step-wrapper';

            let optionsHTML = '';
            step.options.forEach((option, index) => {
                optionsHTML += `<button class="option-btn" data-index="${index}">${option}</button>`;
            });

            stepWrapper.innerHTML = `
                <p class="step-question">${step.question}</p>
                <div class="options-grid">${optionsHTML}</div>
                <div class="step-explanation" style="display: none;"></div>
            `;

            stepsContainer.appendChild(stepWrapper);

            setTimeout(() => stepWrapper.classList.add('active'), 100);

            stepWrapper.querySelectorAll('.option-btn').forEach(btn => {
                btn.addEventListener('click', handleOptionClick);
            });
        }

        function handleOptionClick(event) {
            const selectedBtn = event.target;
            const selectedIndex = parseInt(selectedBtn.dataset.index);
            const problem = problems[currentProblemIndex];
            const step = problem.steps[currentStepIndex];

            const currentStepWrapper = selectedBtn.closest('.step-wrapper');

            if (selectedIndex === step.correctAnswerIndex) {
                selectedBtn.classList.add('correct');

                currentStepWrapper.querySelectorAll('.option-btn').forEach(btn => {
                    btn.disabled = true;
                    if (!btn.classList.contains('correct')) btn.style.opacity = '0.6';
                });

                const explanationDiv = currentStepWrapper.querySelector('.step-explanation');
                explanationDiv.innerHTML = step.explanation;
                explanationDiv.style.display = 'block';

                currentStepIndex++;
                if (currentStepIndex < problem.steps.length) {
                    setTimeout(() => renderStep(problem, currentStepIndex), 1000);
                } else {
                    setTimeout(() => {
                        const finalFeedback = document.getElementById('final-feedback');
                        if(finalFeedback) {
                           finalFeedback.textContent = 'Tebrikler! Problemi baÅŸarÄ±yla Ã§Ã¶zdÃ¼n! ğŸ‰';
                           finalFeedback.style.display = 'block';
                        }
                    }, 1000);
                }

            } else {
                selectedBtn.classList.add('incorrect');
                setTimeout(() => selectedBtn.classList.remove('incorrect'), 800);
            }
        }
        
        function handleNewProblemClick() {
            currentProblemIndex = (currentProblemIndex + 1) % problems.length;
            loadProblem(currentProblemIndex);
        }
        
        function handleFinishClick() {
            window.close();
        }

        newProblemBtn.addEventListener('click', handleNewProblemClick);
        finishBtn.addEventListener('click', handleFinishClick);

        loadProblem(currentProblemIndex);
    });
    </script>
</body>
</html>